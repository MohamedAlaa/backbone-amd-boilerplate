define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(e,t,n,r,i,s){function p(){return setTimeout(function(){o=undefined}),o=e.now()}function d(e,t){var r,i=0,s={height:e};t=t?1:0;for(;i<4;i+=2-t)r=n[i],s["margin"+r]=s["padding"+r]=e;return t&&(s.opacity=s.width=e),s}function v(e,t,n){var r,i=(h[t]||[]).concat(h["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function m(t,n,o){var u,f,l,c,h,p,d,m,g=this,y={},b=t.style,w=t.nodeType&&r(t),E=s.get(t,"fxshow");o.queue||(h=e._queueHooks(t,"fx"),h.unqueued==null&&(h.unqueued=0,p=h.empty.fire,h.empty.fire=function(){h.unqueued||p()}),h.unqueued++,g.always(function(){g.always(function(){h.unqueued--,e.queue(t,"fx").length||h.empty.fire()})})),t.nodeType===1&&("height"in n||"width"in n)&&(o.overflow=[b.overflow,b.overflowX,b.overflowY],d=e.css(t,"display"),m=d==="none"?s.get(t,"olddisplay")||i(t.nodeName):d,m==="inline"&&e.css(t,"float")==="none"&&(b.display="inline-block")),o.overflow&&(b.overflow="hidden",g.always(function(){b.overflow=o.overflow[0],b.overflowX=o.overflow[1],b.overflowY=o.overflow[2]}));for(u in n){f=n[u];if(a.exec(f)){delete n[u],l=l||f==="toggle";if(f===(w?"hide":"show")){if(f!=="show"||!E||E[u]===undefined)continue;w=!0}y[u]=E&&E[u]||e.style(t,u)}else d=undefined}if(!e.isEmptyObject(y)){E?"hidden"in E&&(w=E.hidden):E=s.access(t,"fxshow",{}),l&&(E.hidden=!w),w?e(t).show():g.done(function(){e(t).hide()}),g.done(function(){var n;s.remove(t,"fxshow");for(n in y)e.style(t,n,y[n])});for(u in y)c=v(w?E[u]:0,u,g),u in E||(E[u]=c.start,w&&(c.end=c.start,c.start=u==="width"||u==="height"?1:0))}else(d==="none"?i(t.nodeName):d)==="inline"&&(b.display=d)}function g(t,n){var r,i,s,o,u;for(r in t){i=e.camelCase(r),s=n[i],o=t[r],e.isArray(o)&&(s=o[1],o=t[r]=o[0]),r!==i&&(t[i]=o,delete t[r]),u=e.cssHooks[i];if(u&&"expand"in u){o=u.expand(o),delete t[i];for(r in o)r in t||(t[r]=o[r],n[r]=s)}else n[i]=s}}function y(t,n,r){var i,s,u=0,a=c.length,f=e.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;var e=o||p(),n=Math.max(0,h.startTime+h.duration-e),r=n/h.duration||0,i=1-r,u=0,a=h.tweens.length;for(;u<a;u++)h.tweens[u].run(i);return f.notifyWith(t,[h,i,n]),i<1&&a?n:(f.resolveWith(t,[h]),!1)},h=f.promise({elem:t,props:e.extend({},n),opts:e.extend(!0,{specialEasing:{}},r),originalProperties:n,originalOptions:r,startTime:o||p(),duration:r.duration,tweens:[],createTween:function(n,r){var i=e.Tween(t,h.opts,n,r,h.opts.specialEasing[n]||h.opts.easing);return h.tweens.push(i),i},stop:function(e){var n=0,r=e?h.tweens.length:0;if(s)return this;s=!0;for(;n<r;n++)h.tweens[n].run(1);return e?f.resolveWith(t,[h,e]):f.rejectWith(t,[h,e]),this}}),d=h.props;g(d,h.opts.specialEasing);for(;u<a;u++){i=c[u].call(h,t,d,h.opts);if(i)return i}return e.map(d,v,h),e.isFunction(h.opts.start)&&h.opts.start.call(t,h),e.fx.timer(e.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}var o,u,a=/^(?:toggle|show|hide)$/,f=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),l=/queueHooks$/,c=[m],h={"*":[function(t,n){var r=this.createTween(t,n),i=r.cur(),s=f.exec(n),o=s&&s[3]||(e.cssNumber[t]?"":"px"),u=(e.cssNumber[t]||o!=="px"&&+i)&&f.exec(e.css(r.elem,t)),a=1,l=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,e.style(r.elem,t,u+o);while(a!==(a=r.cur()/i)&&a!==1&&--l)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};return e.Animation=e.extend(y,{tweener:function(t,n){e.isFunction(t)?(n=t,t=["*"]):t=t.split(" ");var r,i=0,s=t.length;for(;i<s;i++)r=t[i],h[r]=h[r]||[],h[r].unshift(n)},prefilter:function(e,t){t?c.unshift(e):c.push(e)}}),e.speed=function(t,n,r){var i=t&&typeof t=="object"?e.extend({},t):{complete:r||!r&&n||e.isFunction(t)&&t,duration:t,easing:r&&n||n&&!e.isFunction(n)&&n};i.duration=e.fx.off?0:typeof i.duration=="number"?i.duration:i.duration in e.fx.speeds?e.fx.speeds[i.duration]:e.fx.speeds._default;if(i.queue==null||i.queue===!0)i.queue="fx";return i.old=i.complete,i.complete=function(){e.isFunction(i.old)&&i.old.call(this),i.queue&&e.dequeue(this,i.queue)},i},e.fn.extend({fadeTo:function(e,t,n,i){return this.filter(r).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,n,r,i){var o=e.isEmptyObject(t),u=e.speed(n,r,i),a=function(){var n=y(this,e.extend({},t),u);(o||s.get(this,"finish"))&&n.stop(!0)};return a.finish=a,o||u.queue===!1?this.each(a):this.queue(u.queue,a)},stop:function(t,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof t!="string"&&(r=n,n=t,t=undefined),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var n=!0,o=t!=null&&t+"queueHooks",u=e.timers,a=s.get(this);if(o)a[o]&&a[o].stop&&i(a[o]);else for(o in a)a[o]&&a[o].stop&&l.test(o)&&i(a[o]);for(o=u.length;o--;)u[o].elem===this&&(t==null||u[o].queue===t)&&(u[o].anim.stop(r),n=!1,u.splice(o,1));(n||!r)&&e.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var n,r=s.get(this),i=r[t+"queue"],o=r[t+"queueHooks"],u=e.timers,a=i?i.length:0;r.finish=!0,e.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0);for(n=u.length;n--;)u[n].elem===this&&u[n].queue===t&&(u[n].anim.stop(!0),u.splice(n,1));for(n=0;n<a;n++)i[n]&&i[n].finish&&i[n].finish.call(this);delete r.finish})}}),e.each(["toggle","show","hide"],function(t,n){var r=e.fn[n];e.fn[n]=function(e,t,i){return e==null||typeof e=="boolean"?r.apply(this,arguments):this.animate(d(n,!0),e,t,i)}}),e.each({slideDown:d("show"),slideUp:d("hide"),slideToggle:d("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){e.fn[t]=function(e,t,r){return this.animate(n,e,t,r)}}),e.timers=[],e.fx.tick=function(){var t,n=0,r=e.timers;o=e.now();for(;n<r.length;n++)t=r[n],!t()&&r[n]===t&&r.splice(n--,1);r.length||e.fx.stop(),o=undefined},e.fx.timer=function(t){e.timers.push(t),t()?e.fx.start():e.timers.pop()},e.fx.interval=13,e.fx.start=function(){u||(u=setInterval(e.fx.tick,e.fx.interval))},e.fx.stop=function(){clearInterval(u),u=null},e.fx.speeds={slow:600,fast:200,_default:400},e});