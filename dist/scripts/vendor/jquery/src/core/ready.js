define(["../core","../core/init","../deferred"],function(e){function n(){document.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1),e.ready()}var t;e.fn.ready=function(t){return e.ready.promise().done(t),this},e.extend({isReady:!1,readyWait:1,holdReady:function(t){t?e.readyWait++:e.ready(!0)},ready:function(n){if(n===!0?--e.readyWait:e.isReady)return;e.isReady=!0;if(n!==!0&&--e.readyWait>0)return;t.resolveWith(document,[e]),e.fn.triggerHandler&&(e(document).triggerHandler("ready"),e(document).off("ready"))}}),e.ready.promise=function(r){return t||(t=e.Deferred(),document.readyState==="complete"?setTimeout(e.ready):(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))),t.promise(r)},e.ready.promise()});